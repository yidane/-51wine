<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>门票预订</title>
    <link rel="stylesheet" href="../Styles/TicketList.css" />
    <link href="../styles/swiper.min.css" rel="stylesheet" />
    <script src="../javaScripts/zepto.min.js"></script>
    <script src="../javaScripts/knockout-3.3.0.js"></script>
    <style>
        .modal-backdrop {
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            /*z-index: 1000;*/
            background-color: gray;
            opacity: 0.4;
        }
    </style>
</head>
<body>


    <!--<div class="tab tabs">-->
    <div class="tab-navs">
        <a href="javascript:;" class="active">全部</a>
        <a href="javascript:;">门票</a>
        <a href="javascript:;">车票</a>
    </div>
    <div id="tabs-container" class="container swiper-container">
        <div class="swiper-wrapper" data-bind='foreach: Data'>
            <div class="swiper-slide">
                <div class="content-slide">
                    <div class="tab-pane active">
                        <div class="panel panel-default" data-bind='foreach: content'>
                            <div class="panel-bd" data-bind="style: { backgroundImage: image }">
                                <a data-bind="attr: { 'href': 'TicketDetail.html?ticketid=' + ticketCategoryId + '&ticketName=' + ticketName + '&price=' + price }" class="thumb-active">

                                    <div class="thumb-cover pull-left">
                                        <div class="thumb-cnt">
                                            <span class="title text-white">
                                                <!--ko text: ticketName-->
                                                <!--/ko-->
                                                <!--ko text: price-->
                                                <!--/ko-->
                                            </span><span class="other text-white">元</span>
                                        </div>
                                        <div class="mask modal-backdrop"></div>
                                    </div>
                                </a>
                                <span class="recommend"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--</div>-->

    <script src="../javaScripts/swiper.min.js"></script>
    <script>
        $(function () {
            loadTicket();
        });
    </script>
    <script type="text/javascript">
        function loadTicket() {
            $.ajax({
                type: "post",
                url: '../WebService/OrderWebService.asmx/TicketCategoryList',
                dataType: 'json',
                success: function (result) {
                    if (result.IsSuccess) {
                        ko.applyBindings(result);
                        initSwiper();
                    } else {
                        alert(result.Message);
                    }
                }
            });
        }
        function initSwiper() {
            var tabsSwiper = new Swiper('.swiper-container', {
                speed: 500,
                onSlideChangeStart: function () {
                    $(".tab-navs a.active").removeClass('active');
                    $(".tab-navs a").eq(tabsSwiper.activeIndex).addClass('active');

                    $(".tab-pane .active").removeClass('active');
                    $(".tab-pane").eq(tabsSwiper.activeIndex).addClass('active');
                },
                onSlideChangeEnd: function (swiper) {
                    swiper.container[0].scrollTop = 0;
                }
            });

            $(".tab-navs a").on('touchstart mousedown', function (e) {
                e.preventDefault();
                $(".tab-navs .active").removeClass('active');
                $(this).addClass('active');
                tabsSwiper.slideTo($(this).index());
            });
            $(".tab-navs a").click(function (e) {
                e.preventDefault();
            });
        }
    </script>
</body>
</html>
